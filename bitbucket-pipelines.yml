image: node:8.6.0

pipelines:
  branches:
    master:
    - step:
      name: Build
      caches:
      - node
      script:
      - curl -o- -L https://yarnpkg.com/install.sh | bash -s -- --version 1.0.2
      - export PATH=$HOME/.yarn/bin:$PATH
      - yarn
      - npm run dist
    - step:
      name: Deploy
      caches:
      - node
      script:
      - firebase deploy --token $FIREBASE_TOKEN
